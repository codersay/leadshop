(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52434c1e"],{"1ec2":function(e,t,i){"use strict";i("8fc8")},"1ed8":function(e,t){e.exports=function(e,t,i,a){var s="undefined"!==typeof a?[a,e]:[e],l=new Blob(s,{type:i||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(l,t);else{var n=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(l):window.webkitURL.createObjectURL(l),o=document.createElement("a");o.style.display="none",o.href=n,o.setAttribute("download",t),"undefined"===typeof o.download&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(n)}),200)}}},"80bb":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"le-matter"},[e.uploadLoading?i("div",{staticClass:"le-upload-loading flex align-center justify-center"},[e._m(0)]):e._e(),e.bind||e.isBind?e._e():i("div",{staticClass:"le-bind"},[i("div",{staticClass:"le-bind__content flex flex-direction align-center"},[i("div",{staticClass:"le-bind-logo"}),i("div",{staticClass:"le-bind-name"},[e._v("微信小程序")]),e._m(1),i("el-button",{staticClass:"le-bind-btn",attrs:{type:"primary"},on:{click:e.goBind}},[e._v("立即绑定")])],1)]),e.bind&&!e.isBind||e.toBind?i("el-form",{ref:"bind",staticClass:"le-form",attrs:{rules:e.rules,model:e.form,"label-width":"180px"}},[i("div",{staticClass:"le-form__header flex align-center"},[i("span",{staticClass:"le-tip"}),i("span",{staticClass:"le-text"},[e._v("填写小程序信息")])]),i("el-form-item",{attrs:{label:"小程序名称"}},[i("el-input",{attrs:{placeholder:"请输入小程序名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"AppID",prop:"AppID"}},[i("el-input",{attrs:{placeholder:"请输入AppID"},model:{value:e.form.AppID,callback:function(t){e.$set(e.form,"AppID",t)},expression:"form.AppID"}})],1),i("el-form-item",{attrs:{label:"AppSecret",prop:"AppSecret"}},[i("el-input",{attrs:{placeholder:"请输入AppSecret"},model:{value:e.form.AppSecret,callback:function(t){e.$set(e.form,"AppSecret",t)},expression:"form.AppSecret"}})],1)],1):e._e(),e.isBind&&!e.toBind?[i("div",{staticClass:"le-bind-over"},[e.isPay?e._e():i("div",{staticClass:"le-bind-header"},[i("span",{staticClass:"le-text"},[e._v("你的微信小程序尚未设置支付方式，请先设置支付方式。")]),i("he-link",{attrs:{href:"channel/applets-pay"}},[i("el-button",{staticClass:"le-btn",attrs:{type:"primary"}},[e._v("立即配置")])],1)],1),i("div",{staticClass:"le-info le-card"},[e._m(2),i("div",{staticClass:"le-item flex"},[i("div",{staticClass:"le-item__label"},[e._v("小程序名称")]),i("div",{staticClass:"le-item__value"},[e._v(e._s(e.form.name))])]),i("div",{staticClass:"le-item flex"},[i("div",{staticClass:"le-item__label"},[e._v("小程序码")]),i("div",{staticClass:"le-item__value"},[i("div",{directives:[{name:"popup",rawName:"v-popup.uploadQrcode",value:e.qrcode,expression:"qrcode",modifiers:{uploadQrcode:!0}}],staticClass:"le-item--download",attrs:{width:"340",title:"小程序二维码",hide_cancel:!0,sure_btn:"下载二维码",module:"channel"}},[e._v(" 下载小程序码 ")]),i("div",{staticClass:"le-item-tip"},[e._v("下载小程序码，用于推广与分享小程序")])])]),i("div",{staticClass:"le-item flex"},[i("div",{staticClass:"le-item__label"},[e._v("小程序包")]),i("div",{staticClass:"le-item__value"},[i("div",{staticClass:"le-item--download",on:{click:function(t){return e.download()}}},[e._v(" 下载小程序包 ")])])])]),i("div",{staticClass:"le-info le-card"},[e._m(3),i("div",{staticClass:"le-item flex"},[i("div",{staticClass:"le-item__label"},[e._v("AppID")]),i("div",{staticClass:"le-item__value"},[e._v(e._s(e.form.AppID))])]),i("div",{staticClass:"le-item flex"},[i("div",{staticClass:"le-item__label"},[e._v("AppSecret")]),i("div",{staticClass:"le-item__value"},[e._v(e._s(e.form.AppSecret))])]),i("el-button",{staticClass:"le-editor",attrs:{type:"primary"},on:{click:function(t){e.toBind=!0}}},[e._v("修改账号信息")])],1)])]:e._e(),e.bind&&!e.isBind||e.toBind?i("div",{staticClass:"le-cardpin"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("bind")}}},[e._v("保存")])],1):e._e()],2)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"le-upload-content"},[a("img",{staticClass:"le-upload-img",attrs:{src:i("9892")}}),a("div",[e._v("下载中...")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"le-bind-des"},[e._v(" 绑定小程序并授权，快速发布小程"),i("br"),e._v(" 序商城，自动提交最新版本的审核 ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"le-info__header flex align-center"},[i("span",{staticClass:"le-tip"}),i("span",{staticClass:"le-text"},[e._v("基本信息")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"le-info__header flex align-center"},[i("span",{staticClass:"le-tip"}),i("span",{staticClass:"le-text"},[e._v("账号信息")])])}],l=i("1ed8"),n=i.n(l),o={name:"applets-info",data:function(){return{bind:!1,toBind:!1,rules:{AppID:[{required:!0,message:"请输入AppID",trigger:"blur"}],AppSecret:[{required:!0,message:"请输入AppSecret",trigger:"blur"}]},form:{name:"",AppID:"",AppSecret:""},isPay:!1,isBind:!1,qrcode:"",uploadLoading:!1}},methods:{goBind:function(){this.bind=!0},save:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.$heshop.appconfig("post",{behavior:"save",key:"apply_weapp"},t.form).then((function(){t.$notify({title:"保存成功",message:"小程序手动绑定成功。",type:"success"}),t.toBind=!1,t.bind=!1,t.getForm()})).catch((function(e){t.$message.error(e.data.message)}))}))},getForm:function(){var e=this;this.$heshop.appconfig("get").then((function(t){e.form=t.apply.weapp,e.isPay=!!t.appPay.weapp.appid,e.isBind=!!t.apply.weapp.AppID})).catch((function(t){e.$message.error(t.data.message)}))},getCode:function(){var e=this;this.$heshop.qrcode("post").then((function(t){e.qrcode=t.weapp.image})).catch((function(t){e.$message.error(t.data.message)}))},download:function(){var e=this;this.uploadLoading=!0,this.$heshop.download().then((function(t){setTimeout((function(){e.uploadLoading=!1}),1e3),n()(t,"wxapp.zip")})).catch((function(e){console.error(e)}))}},mounted:function(){this.getForm(),this.getCode()}},c=o,r=(i("1ec2"),i("2877")),d=Object(r["a"])(c,a,s,!1,null,"4dedaab4",null);t["default"]=d.exports},"8fc8":function(e,t,i){},9892:function(e,t,i){e.exports=i.p+"img/le-upload-applets.8b4e315c.gif"}}]);