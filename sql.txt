CREATE TABLE `heshop_initialize_prefix_finance` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `UID` bigint(20) DEFAULT NULL COMMENT '用户ID',   `order_sn` varchar(50) NOT NULL COMMENT '提现订单号',   `price` decimal(10,2) NOT NULL COMMENT '提现金额',   `service_charge` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '提现手续费（%）',   `type` varchar(10) NOT NULL DEFAULT '' COMMENT '提现方式 wechatDib: ''自动到账微信零钱'', wechat: ''提现到微信'', alipay: ''提现到支付宝'',bankCard: ''提现到银行卡''',   `extra` longtext NOT NULL COMMENT '额外信息',   `status` tinyint(4) NOT NULL DEFAULT '0' COMMENT '提现状态 0--申请 1--同意 2--已打款 3--驳回',   `remark` varchar(1024) NOT NULL DEFAULT '' COMMENT '备注',   `name` varchar(50) NOT NULL DEFAULT '' COMMENT '真实姓名',   `model` varchar(50) NOT NULL COMMENT '提现来源(promoter)',   `transfer_status` tinyint(1) NOT NULL DEFAULT '0' COMMENT '0.待转账 | 1.已转账  | 2.拒绝转账',   `mobile` varchar(20) NOT NULL DEFAULT '' COMMENT '手机',   `AppID` varchar(50) NOT NULL COMMENT '应用ID',   `merchant_id` bigint(10) NOT NULL COMMENT '商户ID',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
CREATE TABLE `heshop_initialize_prefix_promoter` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `UID` bigint(20) NOT NULL COMMENT '用户ID',   `level` tinyint(2) DEFAULT '1' COMMENT '当前等级',   `start_level` tinyint(2) DEFAULT '1' COMMENT '起步等级',   `commission` decimal(10,2) DEFAULT '0.00' COMMENT '佣金',   `commission_amount` decimal(10,2) DEFAULT '0.00' COMMENT '总计佣金',   `status` tinyint(2) DEFAULT '0' COMMENT '-2清退后接到招募令 -1接到招募令 0普通用户 1申请待审核 2审核通过 3已拒绝 4已清退',   `note` varchar(255) DEFAULT '' COMMENT '拒绝原因',   `transfer_id` bigint(20) DEFAULT NULL COMMENT '移交用户ID',   `repel_time` bigint(10) DEFAULT NULL COMMENT '清退时间',   `invite_id` bigint(10) NOT NULL DEFAULT '0' COMMENT '邀请方ID',   `apply_content` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT '申请内容json',   `apply_time` bigint(10) DEFAULT NULL COMMENT '申请时间',   `join_time` bigint(10) DEFAULT NULL COMMENT '加入时间',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   `invite_number` int(11) DEFAULT '0' COMMENT '邀请数量',   PRIMARY KEY (`id`),   KEY `用户ID` (`UID`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
CREATE TABLE `heshop_initialize_prefix_promoter_commission` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `beneficiary` bigint(20) NOT NULL COMMENT '受益人ID',   `order_goods_id` bigint(20) NOT NULL COMMENT '分销订单ID',   `commission` decimal(10,2) DEFAULT '0.00' COMMENT '佣金',   `level` tinyint(1) DEFAULT '1' COMMENT '佣金等级',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   `sales_amount` decimal(10,2) DEFAULT '0.00' COMMENT '销售金额',   PRIMARY KEY (`id`),   KEY `受益人ID` (`beneficiary`),   KEY `分销订单ID` (`order_goods_id`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
CREATE TABLE `heshop_initialize_prefix_promoter_goods` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `goods_id` bigint(20) NOT NULL COMMENT '商品ID',   `sales` int(10) DEFAULT '0' COMMENT '销量',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   PRIMARY KEY (`id`),   KEY `商品ID` (`goods_id`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
CREATE TABLE `heshop_initialize_prefix_promoter_level` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `level` tinyint(1) NOT NULL COMMENT '等级权重',   `name` varchar(8) NOT NULL COMMENT '等级名称',   `first` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '一级佣金',   `second` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '二级佣金',   `third` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '三级佣金',   `is_auto` tinyint(1) NOT NULL DEFAULT '0' COMMENT '0不允许 1允许',   `update_type` tinyint(1) NOT NULL DEFAULT '1' COMMENT '1任意条件 2全部条件',   `condition` varchar(512) NOT NULL COMMENT '条件',   `AppID` varchar(50) NOT NULL COMMENT '应用ID',   `merchant_id` bigint(10) NOT NULL COMMENT '商户ID',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
CREATE TABLE `heshop_initialize_prefix_promoter_level_change_log` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `UID` bigint(20) NOT NULL COMMENT '用户ID',   `old_level` tinyint(2) NOT NULL COMMENT '之前等级',   `old_level_name` varchar(255) NOT NULL COMMENT '之前等级',   `new_level` tinyint(2) NOT NULL COMMENT '现在等级',   `new_level_name` varchar(255) NOT NULL COMMENT '现在等级',   `type` tinyint(1) DEFAULT '1' COMMENT '1升级  2降级',   `look_status` tinyint(1) DEFAULT '0' COMMENT '查看状态',   `push_status` tinyint(1) DEFAULT '0' COMMENT '推送状态',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   PRIMARY KEY (`id`),   KEY `用户ID` (`UID`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
CREATE TABLE `heshop_initialize_prefix_promoter_lose_log` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `parent_id` bigint(20) NOT NULL COMMENT '父级ID',   `UID` bigint(20) NOT NULL COMMENT '用户ID',   `type` tinyint(1) DEFAULT '1' COMMENT '失去下级原因  1解除  2清退  3保护期',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   PRIMARY KEY (`id`),   KEY `父级ID` (`parent_id`),   KEY `用户ID` (`UID`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
CREATE TABLE `heshop_initialize_prefix_promoter_material` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `name` varchar(10) NOT NULL COMMENT '素材名称',   `type` tinyint(1) NOT NULL DEFAULT '1' COMMENT '1图片 2视频',   `content` varchar(200) NOT NULL COMMENT '素材文案',   `pic_list` varchar(2048) NOT NULL DEFAULT '' COMMENT '图片列表',   `video_list` varchar(512) NOT NULL DEFAULT '' COMMENT '视频',   `video_cover` varchar(512) NOT NULL DEFAULT '' COMMENT '视频封面',   `goods_id` int(11) NOT NULL DEFAULT '0' COMMENT '关联商品id',   `share_count` int(11) NOT NULL DEFAULT '0' COMMENT '分享次数',   `AppID` varchar(50) NOT NULL COMMENT '应用ID',   `merchant_id` bigint(10) NOT NULL COMMENT '商户ID',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
CREATE TABLE `heshop_initialize_prefix_promoter_order` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `UID` bigint(20) NOT NULL COMMENT '买家ID',   `order_sn` varchar(50) NOT NULL COMMENT '订单号',   `order_goods_id` bigint(20) NOT NULL COMMENT '订单商品ID',   `goods_number` int(10) NOT NULL COMMENT '总共商品数量',   `commission_number` int(10) NOT NULL COMMENT '分佣商品数量',   `total_amount` decimal(10,2) NOT NULL COMMENT '分佣金额',   `profits_amount` decimal(10,2) NOT NULL COMMENT '分佣利润',   `status` tinyint(1) NOT NULL DEFAULT '0' COMMENT '-1已失效 0待结算 1已结算',   `count_rules` tinyint(1) DEFAULT '1' COMMENT '计算规则  1商品实付金额  2商品利润',   `AppID` varchar(50) NOT NULL COMMENT '应用ID',   `merchant_id` bigint(10) NOT NULL COMMENT '商户ID',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   PRIMARY KEY (`id`),   KEY `订单商品ID` (`order_goods_id`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
CREATE TABLE `heshop_initialize_prefix_promoter_zone` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `UID` bigint(20) NOT NULL COMMENT '用户ID',   `is_admin` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否为管理员',   `name` varchar(10) NOT NULL DEFAULT '' COMMENT '素材名称',   `type` tinyint(1) NOT NULL DEFAULT '1' COMMENT '1图片 2视频',   `content` varchar(200) NOT NULL COMMENT '素材文案',   `pic_list` varchar(2048) NOT NULL DEFAULT '' COMMENT '图片列表',   `video_list` varchar(512) NOT NULL DEFAULT '' COMMENT '视频',   `video_cover` varchar(512) NOT NULL DEFAULT '' COMMENT '视频封面',   `link` varchar(5096) NOT NULL DEFAULT '' COMMENT '跳转链接',   `AppID` varchar(50) NOT NULL COMMENT '应用ID',   `merchant_id` bigint(10) NOT NULL COMMENT '商户ID',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
CREATE TABLE `heshop_initialize_prefix_promoter_zone_upvote` (   `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',   `UID` bigint(20) NOT NULL COMMENT '用户ID',   `zone_id` int(11) NOT NULL COMMENT '空间动态id',   `AppID` varchar(50) NOT NULL COMMENT '应用ID',   `merchant_id` bigint(10) NOT NULL COMMENT '商户ID',   `created_time` int(10) DEFAULT '0' COMMENT '创建时间',   `updated_time` int(10) DEFAULT '0' COMMENT '更新时间',   `deleted_time` int(10) DEFAULT '0' COMMENT '删除时间',   `is_deleted` tinyint(100) DEFAULT '0' COMMENT '是否删除',   PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
ALTER TABLE `heshop_initialize_prefix_goods` ADD COLUMN `is_promoter`  tinyint(1) NULL DEFAULT 0 COMMENT '参与分销  0不参与  1参与', ADD COLUMN `max_price`  decimal(10,2) NULL DEFAULT NULL COMMENT '最高价', ADD COLUMN `max_profits`  decimal(10,2) NULL DEFAULT NULL COMMENT '最高利润';
ALTER TABLE `heshop_initialize_prefix_user` ADD COLUMN `parent_id`  bigint(20) NULL DEFAULT 0 COMMENT '父级ID', ADD COLUMN `bind_time`  bigint(10) NULL DEFAULT NULL COMMENT '绑定时间';
ALTER TABLE `heshop_initialize_prefix_order` ADD COLUMN `is_promoter` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否是分销订单 0普通订单  1自购优惠 2自购返佣 3普通分销'', ADD COLUMN `promoter_reduced`  decimal(10,2) NOT NULL DEFAULT 0.00 COMMENT '分销自购优惠';
ALTER TABLE `heshop_initialize_prefix_order_goods` ADD COLUMN `promoter_reduced`  decimal(10,2) NOT NULL DEFAULT 0.00 COMMENT '分销自购优惠';
INSERT INTO `heshop_initialize_prefix_promoter_level` (`id`, `level`, `name`, `first`, `second`, `third`, `is_auto`, `update_type`, `condition`, `AppID`, `merchant_id`, `created_time`, `updated_time`, `deleted_time`, `is_deleted`) VALUES ('1', '1', '默认一级', '0.00', '0.00', '0.00', '0', '1', '[]', '98c08c25f8136d590c', '1', '0', '0', '0', '0');
